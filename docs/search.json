{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"ragie-php Documentation","text":"<p><code>ragie-php</code> is a modern PHP SDK for the Ragie retrieval API. It ships a generated low-level client plus a convenience layer with caching, retries, and guardrails so you can drop Ragie search directly into CLI tools, workers, or ParaGra-based orchestrators.</p> <ul> <li>Language: PHP 8.2+</li> <li>Focus: Retrieval only. LLM orchestration lives in <code>paragra-php</code>.</li> <li>Status: Pre-release. We can refactor aggressively because nothing has shipped yet.</li> </ul>","path":["ragie-php Documentation"],"tags":[]},{"location":"#why-this-library-exists","level":2,"title":"Why this library exists","text":"<ul> <li>Keep Ragie access lightweight and dependency-free.</li> <li>Provide ergonomic helpers (batching, caching, debugging) without hiding the underlying API.</li> <li>Offer a reproducible workflow: tests + docs + SDK regen all run from a clean checkout.</li> </ul>","path":["ragie-php Documentation"],"tags":[]},{"location":"#what-lives-where","level":2,"title":"What lives where","text":"Layer Repository Responsibilities SDK <code>ragie-php</code> HTTP client, auth, retries, caching, typed models Orchestration <code>paragra-php</code> Provider pools, fallback plans, embeddings/vector adapters Demo app <code>ask.vexy.art</code> Reference web app + smoke-test target <p>Keep these layers decoupled—<code>ragie-php</code> must compile and test without ParaGra present.</p>","path":["ragie-php Documentation"],"tags":[]},{"location":"#documentation-structure","level":2,"title":"Documentation structure","text":"<ul> <li>Getting Started covers installation and the first query.</li> <li>Architecture explains the client layout and extension points.</li> <li>Guides provide production-ready snippets.</li> <li>How-To documents testing, configuration, and debugging.</li> <li>Reference lists utility scripts, docs tooling, and release steps.</li> </ul> <p>Use the left navigation or search (⌘K / Ctrl+K) to jump around.</p>","path":["ragie-php Documentation"],"tags":[]},{"location":"architecture/overview/","level":1,"title":"Architecture Overview","text":"<pre><code>User code → Ragie\\Client → Generated API client → Ragie REST endpoints\n</code></pre>","path":["Architecture","Architecture Overview"],"tags":[]},{"location":"architecture/overview/#layers","level":2,"title":"Layers","text":"<ol> <li>Convenience layer (<code>src/Client.php</code>, <code>src/RagAnswerer/</code> etc.)</li> <li>Input validation</li> <li>Retry/caching helpers</li> <li>Debug logging</li> <li>Generated API client (<code>src/Ragie/Api/*</code>)</li> <li>Output of <code>build_generatapi.sh</code></li> <li>Mirrors the official Ragie OpenAPI schema</li> <li>Supporting utilities</li> <li><code>cache/</code> implementations (in-memory + PSR SimpleCache bridge)</li> <li><code>benchmarks/</code> harness for latency testing</li> </ol>","path":["Architecture","Architecture Overview"],"tags":[]},{"location":"architecture/overview/#key-extension-points","level":2,"title":"Key extension points","text":"<ul> <li><code>withCache(CacheInterface $cache, int $ttlSeconds)</code> – plug in Redis/Memcached.</li> <li><code>withHttpClient(ClientInterface $client)</code> – supply a custom PSR-18 client.</li> <li><code>withDefaultTopK(int $k)</code> / <code>withDefaultRerank()</code> – set defaults for every call.</li> </ul>","path":["Architecture","Architecture Overview"],"tags":[]},{"location":"architecture/overview/#generated-code-hygiene","level":2,"title":"Generated code hygiene","text":"<ul> <li>Never edit <code>src/Ragie/Api/*</code> by hand. Run <code>build_generatapi.sh</code> after updating <code>openapi.json</code>.</li> <li>Commit both the schema (<code>openapi.json</code>) and checksum (<code>openapi.sha256</code>).</li> <li>CI checks hash mismatches to prevent stale clients.</li> </ul>","path":["Architecture","Architecture Overview"],"tags":[]},{"location":"architecture/overview/#upcoming-changes","level":2,"title":"Upcoming changes","text":"<p>We will remove legacy orchestration helpers, cut a clean 2.0.0 release, and let ParaGra pick up the multi-provider responsibilities.</p>","path":["Architecture","Architecture Overview"],"tags":[]},{"location":"getting-started/installation/","level":1,"title":"Installation","text":"","path":["Getting Started","Installation"],"tags":[]},{"location":"getting-started/installation/#requirements","level":2,"title":"Requirements","text":"<ul> <li>PHP 8.2+</li> <li>Composer 2.7+</li> <li><code>ext-json</code>, <code>ext-mbstring</code>, and <code>ext-curl</code></li> <li>Ragie API key in <code>RAGIE_API_KEY</code></li> </ul>","path":["Getting Started","Installation"],"tags":[]},{"location":"getting-started/installation/#install-via-composer","level":2,"title":"Install via Composer","text":"<pre><code>composer require ragie/ragie-php:^2.0@dev\n</code></pre> <p>During local development inside this monorepo: <pre><code>cd ragie-php\ncomposer install\n</code></pre></p>","path":["Getting Started","Installation"],"tags":[]},{"location":"getting-started/installation/#configure-environment","level":2,"title":"Configure environment","text":"<pre><code>export RAGIE_API_KEY=sk_live_...\n</code></pre> <p>Optional knobs: - <code>RAGIE_BASE_URI</code> – point at a staging Ragie endpoint. - <code>RAGIE_TIMEOUT</code> – override default HTTP timeout (seconds).</p>","path":["Getting Started","Installation"],"tags":[]},{"location":"getting-started/installation/#verify-the-install","level":2,"title":"Verify the install","text":"<pre><code>php -r \"require 'vendor/autoload.php'; echo \\Ragie\\\\Client::class, PHP_EOL;\"\n</code></pre> <p>When Composer autoloads without errors you are ready to query Ragie.</p>","path":["Getting Started","Installation"],"tags":[]},{"location":"getting-started/quickstart/","level":1,"title":"Quickstart","text":"","path":["Getting Started","Quickstart"],"tags":[]},{"location":"getting-started/quickstart/#minimal-query","level":2,"title":"Minimal query","text":"<pre><code>&lt;?php\n\nuse Ragie\\Client;\n\nrequire __DIR__ . '/vendor/autoload.php';\n\n$ragie = new Client(getenv('RAGIE_API_KEY'));\n$result = $ragie-&gt;retrieve('What is Ragie?');\n\nforeach ($result-&gt;getChunks() as $chunk) {\n    printf(\"- %s\\n\", $chunk-&gt;getText());\n}\n</code></pre>","path":["Getting Started","Quickstart"],"tags":[]},{"location":"getting-started/quickstart/#batch-retrieval","level":2,"title":"Batch retrieval","text":"<pre><code>$client = (new Client($apiKey))\n    -&gt;withDefaultTopK(8)\n    -&gt;withDefaultRerank();\n\n$results = $client-&gt;retrieveBatch([\n    'Show onboarding steps',\n    'Reset MFA tokens',\n]);\n</code></pre>","path":["Getting Started","Quickstart"],"tags":[]},{"location":"getting-started/quickstart/#cache-popular-queries","level":2,"title":"Cache popular queries","text":"<pre><code>use Ragie\\Cache\\InMemoryCache;\n\n$client = (new Client($apiKey))\n    -&gt;withCache(new InMemoryCache(), ttlSeconds: 300);\n</code></pre> <p>Swap in <code>SimpleCacheQueryCache</code> with Redis or Memcached when you need persistence.</p>","path":["Getting Started","Quickstart"],"tags":[]},{"location":"getting-started/quickstart/#debug-requests","level":2,"title":"Debug requests","text":"<pre><code>$client = (new Client($apiKey))-&gt;enableDebug();\n</code></pre> <p>Debug mode logs payloads, headers, and chunk counts to the PHP error log to help diagnose staging issues.</p>","path":["Getting Started","Quickstart"],"tags":[]},{"location":"guides/cookbook/","level":1,"title":"Cookbook","text":"<p>Short recipes for common Ragie tasks. These snippets assume you already set <code>RAGIE_API_KEY</code>.</p>","path":["Guides","Cookbook"],"tags":[]},{"location":"guides/cookbook/#minimal-cli-search","level":2,"title":"Minimal CLI search","text":"<pre><code>use Ragie\\Client;\n\nrequire __DIR__ . '/../vendor/autoload.php';\n\n$ragie = new Client(getenv('RAGIE_API_KEY'));\n$query = trim($argv[1] ?? 'What is Ragie?');\n\n$result = $ragie-&gt;retrieve($query);\n\nif ($result-&gt;isEmpty()) {\n    echo \"No context found.\\n\";\n    exit(0);\n}\n\nforeach ($result-&gt;getChunks() as $i =&gt; $chunk) {\n    printf(\"%02d. %s (%s)\\n\", $i + 1, $chunk-&gt;getText(), $chunk-&gt;getDocumentName());\n}\n</code></pre>","path":["Guides","Cookbook"],"tags":[]},{"location":"guides/cookbook/#cache-expensive-queries","level":2,"title":"Cache expensive queries","text":"<pre><code>use Ragie\\Cache\\InMemoryCache;\nuse Ragie\\Client;\n\n$client = (new Client($apiKey))\n    -&gt;withCache(new InMemoryCache(), ttlSeconds: 600)\n    -&gt;withDefaultTopK(12);\n\n$result = $client-&gt;retrieve('How do I reset MFA tokens?');\n</code></pre> <p>Replace <code>InMemoryCache</code> with <code>SimpleCacheQueryCache</code> + Redis/Memcached to stretch rate limits and speed up popular FAQs.</p>","path":["Guides","Cookbook"],"tags":[]},{"location":"guides/cookbook/#custom-error-handling","level":2,"title":"Custom error handling","text":"<pre><code>use Ragie\\Client;\nuse Ragie\\Exception\\InvalidQueryException;\n\n$client = new Client($apiKey);\n\ntry {\n    $client-&gt;retrieve($userQuery);\n} catch (InvalidQueryException $invalid) {\n    logError('Invalid query', ['message' =&gt; $invalid-&gt;getMessage()]);\n    throw $invalid;\n} catch (\\Ragie\\Api\\ApiException $api) {\n    logError('Ragie API error', [\n        'code' =&gt; $api-&gt;getCode(),\n        'body' =&gt; $api-&gt;getResponseBody(),\n    ]);\n    throw new \\RuntimeException('Temporary RAG outage, try again soon.');\n}\n</code></pre>","path":["Guides","Cookbook"],"tags":[]},{"location":"guides/cookbook/#batch-concurrency","level":2,"title":"Batch + concurrency","text":"<pre><code>use Ragie\\Client;\n\n$client = (new Client($apiKey))\n    -&gt;withDefaultTopK(8)\n    -&gt;withDefaultRerank();\n\n$results = $client-&gt;retrieveBatch([\n    'What is Vexy?',\n    'Show me onboarding docs.',\n    'How do I clear caches?',\n]);\n\nforeach ($results as $i =&gt; $result) {\n    printf(\"#%d returned %d chunks\\n\", $i + 1, count($result));\n}\n</code></pre> <p><code>retrieveBatch()</code> executes sequentially, but you can upgrade to <code>retrieveAsync()</code> / <code>retrieveConcurrent()</code> later without touching business logic.</p>","path":["Guides","Cookbook"],"tags":[]},{"location":"guides/cookbook/#production-checklist","level":2,"title":"Production checklist","text":"<ul> <li>Moderation / LLM flows: Keep them in ParaGra or your orchestrator; ragie-php only retrieves.</li> <li>Benchmarking: <code>php benchmarks/RetrievalBenchmark.php</code> records min/max/p95 latency per query once <code>RAGIE_BENCH_*</code> variables are set.</li> <li>Debug logging: <code>(new Client($apiKey))-&gt;enableDebug()</code> writes payloads and chunk counts to <code>error_log</code> for staging rollouts.</li> </ul>","path":["Guides","Cookbook"],"tags":[]},{"location":"how-to/configuration/","level":1,"title":"Configuration &amp; Environment","text":"","path":["How-To","Configuration &amp; Environment"],"tags":[]},{"location":"how-to/configuration/#environment-variables","level":2,"title":"Environment variables","text":"Variable Description <code>RAGIE_API_KEY</code> Required Ragie token <code>RAGIE_BASE_URI</code> Override API host (defaults to <code>https://api.ragie.ai</code>) <code>RAGIE_TIMEOUT</code> HTTP timeout in seconds <code>RAGIE_CACHE_TTL</code> Default TTL when not provided in code <p>Use <code>.env</code> (via <code>symfony/dotenv</code>) or your process manager to load the variables.</p>","path":["How-To","Configuration &amp; Environment"],"tags":[]},{"location":"how-to/configuration/#client-options","level":2,"title":"Client options","text":"<pre><code>$client = (new Client($apiKey))\n    -&gt;withCache($cache, ttlSeconds: 900)\n    -&gt;withDefaultSearchFilters(['collection' =&gt; 'policies'])\n    -&gt;withDefaultTopK(16)\n    -&gt;enableDebug();\n</code></pre>","path":["How-To","Configuration &amp; Environment"],"tags":[]},{"location":"how-to/configuration/#error-handling","level":2,"title":"Error handling","text":"<ul> <li>Catch <code>Ragie\\Exception\\InvalidQueryException</code> for validation issues.</li> <li>Catch <code>Ragie\\Api\\ApiException</code> for HTTP errors (429, 5xx). Inspect <code>$e-&gt;getResponseBody()</code> for more detail.</li> <li>Wrap the call in your orchestrator to translate Ragie errors into user-friendly messages.</li> </ul>","path":["How-To","Configuration &amp; Environment"],"tags":[]},{"location":"how-to/configuration/#benchmark-knobs","level":2,"title":"Benchmark knobs","text":"<p>Environment variables consumed by <code>benchmarks/RetrievalBenchmark.php</code>: - <code>RAGIE_BENCH_RUNS</code> – number of iterations per query - <code>RAGIE_BENCH_FAIL_FAST</code> – stop on first failure - <code>RAGIE_BENCH_OUTPUT</code> – path to JSON report</p>","path":["How-To","Configuration &amp; Environment"],"tags":[]},{"location":"how-to/testing/","level":1,"title":"Testing &amp; QA","text":"","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"how-to/testing/#local-qa-script","level":2,"title":"Local QA script","text":"<p><pre><code>./test.sh\n</code></pre> This runs Composer scripts for linting, PHPStan, Psalm, and PHPUnit.</p>","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"how-to/testing/#focused-phpunit-runs","level":2,"title":"Focused PHPUnit runs","text":"<pre><code>vendor/bin/phpunit --testsuite unit\nvendor/bin/phpunit tests/Integration/RetrieveTest.php\n</code></pre>","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"how-to/testing/#static-analysis","level":2,"title":"Static analysis","text":"<pre><code>composer lint\ncomposer stan\ncomposer psalm\n</code></pre>","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"how-to/testing/#openapi-regeneration-gate","level":2,"title":"OpenAPI regeneration gate","text":"<p>Whenever <code>openapi.json</code> changes: 1. Run <code>./build_generatapi.sh</code>. 2. Commit regenerated files plus checksum updates. 3. Ensure <code>tests/OpenApi/OpenApiArtifactsTest.php</code> passes.</p>","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"how-to/testing/#docs-build-check","level":2,"title":"Docs build check","text":"<p><pre><code>uvx zensical build --clean\n</code></pre> Commit the resulting <code>docs/</code> directory so GitHub Pages stays in sync.</p>","path":["How-To","Testing &amp; QA"],"tags":[]},{"location":"reference/cli/","level":1,"title":"Reference Commands","text":"","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/cli/#composer-scripts","level":2,"title":"Composer scripts","text":"Script Description <code>composer lint</code> PHP-CS fixer + coding standard checks <code>composer stan</code> PHPStan static analysis <code>composer psalm</code> Psalm analysis <code>composer test</code> PHPUnit suites <code>composer qa</code> Aggregate lint + analysis + PHPUnit","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/cli/#helper-scripts","level":2,"title":"Helper scripts","text":"Script Description <code>./test.sh</code> Runs the full QA chain <code>./build_generatapi.sh</code> Regenerates the Ragie API client <code>php benchmarks/RetrievalBenchmark.php</code> Latency + throughput measurements <code>php tools/**</code> Misc helpers (see inline docs)","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/cli/#docs-tooling","level":2,"title":"Docs tooling","text":"<ul> <li><code>uvx zensical serve</code> – hot-reload docs preview (serves <code>src-docs/</code>).</li> <li><code>uvx zensical build --clean</code> – render docs into <code>docs/</code>.</li> </ul>","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/cli/#continuous-integration","level":2,"title":"Continuous integration","text":"<ul> <li><code>ci-docs</code> workflow builds/publishes <code>docs/</code>.</li> <li>QA workflows must pass before merging and before tagging releases.</li> </ul>","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/cli/#releases","level":2,"title":"Releases","text":"<ol> <li>Ensure <code>CHANGELOG.md</code> covers the change set.</li> <li>Run <code>./test.sh</code> and <code>uvx zensical build --clean</code>.</li> <li>Tag with semantic version (e.g., <code>v2.0.0-beta.1</code>).</li> <li>Push tag and create GitHub release notes (include Ragie API compatibility info).</li> </ol>","path":["Reference","Reference Commands"],"tags":[]},{"location":"reference/docs/","level":1,"title":"Documentation Workflow","text":"<p>We use Zensical for the static site.</p>","path":["Reference","Documentation Workflow"],"tags":[]},{"location":"reference/docs/#layout","level":2,"title":"Layout","text":"<ul> <li><code>src-docs/</code> – Markdown sources, grouped by topic.</li> <li><code>docs/</code> – Built HTML + assets that GitHub Pages serves from the default branch.</li> <li><code>zensical.toml</code> – Project configuration (nav, theme, markdown extensions).</li> </ul>","path":["Reference","Documentation Workflow"],"tags":[]},{"location":"reference/docs/#local-commands","level":2,"title":"Local commands","text":"<pre><code>uvx zensical serve               # hot-reload preview at http://127.0.0.1:8000\nuvx zensical build --clean       # rebuild docs/ from scratch\n</code></pre>","path":["Reference","Documentation Workflow"],"tags":[]},{"location":"reference/docs/#github-actions","level":2,"title":"GitHub Actions","text":"<p><code>.github/workflows/docs.yml</code>: 1. Installs uv via the official installer script. 2. Runs <code>uv tool run zensical build --clean</code>. 3. Uploads the <code>docs/</code> folder as a Pages artifact and deploys it.</p>","path":["Reference","Documentation Workflow"],"tags":[]},{"location":"reference/docs/#contribution-checklist","level":2,"title":"Contribution checklist","text":"<ul> <li>Keep navigation deterministic by editing <code>zensical.toml</code> instead of relying on filesystem order.</li> <li>Keep Markdown short and decisive; use admonitions for warnings/notes.</li> <li>Run <code>uvx zensical build --clean</code> before opening a PR so <code>docs/</code> stays in sync with <code>src-docs/</code>.</li> </ul>","path":["Reference","Documentation Workflow"],"tags":[]}]}